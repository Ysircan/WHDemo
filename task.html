<!DOCTYPE html>

<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>ä»»åŠ¡ç­”é¢˜ - Word Hunter</title>
  <style>
    body {
      background-color: #f0f4fa;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    .topbar {
      padding: 20px;
      background-color: #007bff;
      color: white;
      font-size: 18px;
    }
    .outer-box {
      background-color: #e2e8f0;
      padding: 40px 20px;
      border-radius: 12px;
      box-shadow: inset 0 0 20px rgba(0,0,0,0.05);
      width: 90%;
      max-width: 500px;
      margin: 40px auto;
    }
    .task-box {
      background-color: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    .header-strip {
      background-color: #007bff;
      color: white;
      font-size: 20px;
      padding: 12px;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
    }
    .task-title {
      font-size: 22px;
      margin: 30px 0;
      line-height: 1.6;
      opacity: 0;
      transform: translateY(10px);
      animation: fadeInUp 0.5s forwards;
    }
    .option-btn {
      display: block;
      width: 80%;
      margin: 10px auto;
      padding: 12px;
      font-size: 16px;
      background-color: #ffffff;
      color: #333;
      border: 2px solid #007bff;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s;
      opacity: 0;
      transform: translateY(10px);
      animation: fadeInUp 0.5s forwards;
    }
    .option-btn:hover {
      background-color: #007bff;
      color: white;
    }
    .feedback {
      margin-top: 20px;
      font-weight: bold;
    }
    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
       .navbar {
  background-color: #007bff;
  width: 100vw;
  padding: 14px 40px;
  box-sizing: border-box;
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 0;
}

.nav-left {
  display: flex;
  gap: 30px;
  align-items: center;
}

.nav-link {
  color: #ffffff;
  text-decoration: none;
  font-weight: bold;
  font-size: 16px;
  transition: color 0.2s;
}

.nav-link:hover {
  color: #ffd700;
}
    #questionNav button:hover {
  background-color: #d0e6ff !important;
  border-color: #007bff !important;
}

  </style>
</head>
<body>
<div class="navbar">
  <div class="nav-left">
    <a href="draw.html" class="nav-link">ğŸƒ æŠ½å¡</a>
    <a href="gallery.html" class="nav-link">ğŸ–¼ å›¾é‰´</a>
    <a href="audio.html" class="nav-link">ğŸ§ å¬åŠ›ç»ƒä¹ </a>
    <a href="wrong.html" class="nav-link">ğŸ“˜ é”™é¢˜æœ¬</a>
    <a href="home.html" class="nav-link">ğŸ  ä¸»é¡µ</a>
  </div>
</div>


  <div class="outer-box">
      <div class="topbar" id="topbar">åŠ è½½ä¸­...</div>
    <div class="task-box">
      <div class="header-strip">ä»»åŠ¡ç­”é¢˜</div>
      <div class="task-title" id="taskText">é¢˜ç›®åŠ è½½ä¸­...</div>
      <div id="optionsContainer"></div>
      <div class="feedback" id="feedbackText"></div>
    </div>
    <!-- âœ… å¯¼èˆªæ  -->
  <div id="questionNav" style="width: 200px;"></div>

  </div>

  <script>
    const tasks = [
{
    type: "word",
    word: "workshop",
    answer: "ç ”è®¨ä¼š",
    options: ["ç ”è®¨ä¼š", "ä½œåŠ", "è¯¾å ‚", "å±•è§ˆ"]
  },
  {
    type: "word",
    word: "campus",
    answer: "æ ¡å›­",
    options: ["æ ¡å›­", "ä¼šè®®å®¤", "æ•™å®¤", "å›¾ä¹¦é¦†"]
  },
  {
    type: "word",
    word: "deadline",
    answer: "æˆªæ­¢æ—¥æœŸ",
    options: ["æˆªæ­¢æ—¥æœŸ", "å‡æœŸ", "è®¡åˆ’", "æé†’"]
  },
  {
    type: "word",
    word: "complete",
    answer: "å®Œæˆ",
    options: ["å®Œæˆ", "è®¡åˆ’", "åˆ†é…", "å¿˜è®°"]
  },
  {
    type: "word",
    word: "direct",
    answer: "æŒ‡æŒ¥",
    options: ["æŒ‡æŒ¥", "å»ºé€ ", "æ¬è¿", "æŸ¥æ‰¾"]
  },
  {
    type: "word",
    word: "essential",
    answer: "å¿…è¦çš„",
    options: ["å¿…è¦çš„", "æ˜‚è´µçš„", "å¤æ‚çš„", "ä¸ç¡®å®šçš„"]
  },
  {
    type: "word",
    word: "assistant",
    answer: "åŠ©ç†",
    options: ["åŠ©ç†", "ä¸»ç®¡", "å·¥ç¨‹å¸ˆ", "å®ä¹ ç”Ÿ"]
  },
  {
    type: "word",
    word: "styles",
    answer: "é£æ ¼",
    options: ["é£æ ¼", "é¢œè‰²", "å­—ä½“", "å½¢å¼"]
  },
  {
    type: "word",
    word: "subject",
    answer: "ç§‘ç›®",
    options: ["ç§‘ç›®", "å¯¹è±¡", "ä¸»è¯­", "ä¸­å¿ƒ"]
  },
  {
    type: "word",
    word: "invented",
    answer: "å‘æ˜çš„",
    options: ["å‘æ˜çš„", "å‘ç°çš„", "ä¸¢å¤±çš„", "ä¼ é€’çš„"]
  },
  {
    type: "word",
    word: "teenager",
    answer: "é’å°‘å¹´",
    options: ["é’å°‘å¹´", "å„¿ç«¥", "å©´å„¿", "è€äºº"]
  },
  {
    type: "word",
    word: "allow",
    answer: "å…è®¸",
    options: ["å…è®¸", "æ‹’ç»", "å¿½è§†", "é¿å…"]
  },
  {
    type: "word",
    word: "cloth",
    answer: "å¸ƒæ–™",
    options: ["å¸ƒæ–™", "è¡£æœ", "æ¯¯å­", "çª—å¸˜"]
  },
  {
    type: "word",
    word: "accident",
    answer: "äº‹æ•…",
    options: ["äº‹æ•…", "æ„å›¾", "è°‹åˆ’", "åº†å…¸"]
  },
  {
    type: "word",
    word: "discover",
    answer: "å‘ç°",
    options: ["å‘ç°", "åˆ›é€ ", "é‡å»º", "å¿½ç•¥"]
  },
  {
    type: "word",
    word: "individuals",
    answer: "ä¸ªäºº",
    options: ["ä¸ªäºº", "å›¢ä½“", "ç¤¾ä¼š", "å›½å®¶"]
  },
  {
    type: "word",
    word: "population",
    answer: "äººå£",
    options: ["äººå£", "ç”Ÿè‚²ç‡", "ç§»æ°‘", "å±…æ°‘"]
  },
  {
    type: "word",
    word: "control",
    answer: "æ§åˆ¶",
    options: ["æ§åˆ¶", "æå‡", "ä¸‹é™", "å°é”"]
  },
  {
    type: "word",
    word: "mathematics",
    answer: "æ•°å­¦",
    options: ["æ•°å­¦", "ç‰©ç†", "è®¡ç®—æœº", "å·¥ç¨‹"]
  },
  {
    type: "word",
    word: "economy",
    answer: "ç»æµ",
    options: ["ç»æµ", "è´¢åŠ¡", "è´¸æ˜“", "å·¥èµ„"]
  },
  {
    type: "word",
    word: "creativity",
    answer: "åˆ›é€ åŠ›",
    options: ["åˆ›é€ åŠ›", "æŠ€èƒ½", "è€åŠ›", "è®¡åˆ’"]
  },
  {
    type: "word",
    word: "scientist",
    answer: "ç§‘å­¦å®¶",
    options: ["ç§‘å­¦å®¶", "ä½œå®¶", "å·¥ç¨‹å¸ˆ", "åŒ»ç”Ÿ"]
  },
  {
    type: "word",
    word: "experience",
    answer: "ç»éªŒ",
    options: ["ç»éªŒ", "æƒ³æ³•", "çŒœæµ‹", "è®¡åˆ’"]
  },
  {
    type: "word",
    word: "composed",
    answer: "ç”±...ç»„æˆ",
    options: ["ç”±...ç»„æˆ", "å†™ä½œ", "æ¶ˆå¤±", "å‡å°‘"]
  },
  {
    type: "word",
    word: "deadline",
    answer: "æˆªæ­¢æ—¥æœŸ",
    options: ["æˆªæ­¢æ—¥æœŸ", "ä¼šè®®æ—¶é—´", "æé†’", "æ—©æ™¨"]
  }
 ,

  {
    type: "listening",
    audio: "audio/001.mp3",
    sentence: "A group ___ will ___ held by ___ in the library ___  room",
    blanks: ["meeting", "be", "tomorrow", "conference"]
  },
  {
    type: "listening",
    audio: "audio/002.mp3",
    sentence: "A number ___ students have ___ jobs",
    blanks: ["of", "volunteer"]
  },
  {
    type: "listening",
    audio: "audio/003.mp3",
    sentence: "We ___ all meet at ___ office ___ the ___",
    blanks: ["can", "my", "after", "lecture"]
  },
  {
    type: "listening",
    audio: "audio/004.mp3",
    sentence: "Tutorials are ___ in ___ final ___ of the ___",
    blanks: ["scheduled", "the", "week", "term"]
  },
  {
    type: "listening",
    audio: "audio/005.mp3",
    sentence: "You ___ make an ___ to ___ the ___",
    blanks: ["can", "appointment", "meet", "librarian"]
  },
  {
    type: "listening",
    audio: "audio/006.mp3",
    sentence: "Agenda ___ should be ___ by the ___ of the ___",
    blanks: ["items", "submitted", "end", "day"]
  },
  {
    type: "listening",
    audio: "audio/007.mp3",
    sentence: "All ___ must be ___ by a ___ ___",
    blanks: ["dissertations", "accompanied", "submission", "form"]
  },
  {
    type: "listening",
    audio: "audio/008.mp3",
    sentence: "All ___ the ___ must be ___ in ___ to the faculty office",
    blanks: ["of", "assignments", "submitted", "person"]
  },
  {
    type: "listening",
    audio: "audio/009.mp3",
    sentence: "Economic ___ needs ___ be ___ by the ___",
    blanks: ["development", "to", "supported", "government"]
  },
  {
    type: "listening",
    audio: "audio/010.mp3",
    sentence: "All ___ your ___ are ___ by ___",
    blanks: ["of", "assignments", "due", "tomorrow"]
  },
    {
    type: "listening",
    audio: "audio/011.mp3",
    sentence: "An ___ is an ___ element of ___",
    blanks: ["introduction", "essential", "presentation"]
  },
  {
    type: "listening",
    audio: "audio/012.mp3",
    sentence: "The ___ should be ___ to the ___ office before the ___",
    blanks: ["assignments", "submitted", "department", "deadlines"]
  },
  {
    type: "listening",
    audio: "audio/013.mp3",
    sentence: "Consumer ___ has a ___ influence on ___",
    blanks: ["confidence", "direct", "sales"]
  },
  {
    type: "listening",
    audio: "audio/014.mp3",
    sentence: "Economic ___ caused a ___ rise in ___",
    blanks: ["problems", "big", "unemployment"]
  },
  {
    type: "listening",
    audio: "audio/015.mp3",
    sentence: "Tomorrowâ€™s ___ has been ___ due to the ___ ___",
    blanks: ["lecture", "cancelled", "power", "cut"]
  },
  {
    type: "listening",
    audio: "audio/016.mp3",
    sentence: "Students are ___ to ___ at ___ parking ___",
    blanks: ["permitted", "park", "campus", "spaces"]
  },
  {
    type: "listening",
    audio: "audio/017.mp3",
    sentence: "Our ___ is ___ the business ___ ___",
    blanks: ["professor", "hosting", "development", "conference"]
  },
  {
    type: "listening",
    audio: "audio/018.mp3",
    sentence: "The ___ will ___ the ___ later ___",
    blanks: ["designers", "complete", "plan", "today"]
  },
  {
    type: "listening",
    audio: "audio/019.mp3",
    sentence: "___ must be ___ at the ___ of the ___",
    blanks: ["Assignments", "submitted", "end", "term"]
  },
  {
    type: "listening",
    audio: "audio/020.mp3",
    sentence: "The ___ speaker used to be a ___ in this ___",
    blanks: ["visiting", "lecturer", "department"]
  },
    {
    type: "listening",
    audio: "audio/021.mp3",
    sentence: "There is a ___ ___ for further ___ in this ___",
    blanks: ["clear", "need", "research", "field"]
  },
  {
    type: "listening",
    audio: "audio/022.mp3",
    sentence: "It would be ___ ___ to ___ together",
    blanks: ["extremely", "beneficial", "work"]
  },
  {
    type: "listening",
    audio: "audio/023.mp3",
    sentence: "This ___ is ___ into four main ___",
    blanks: ["project", "divided", "sections"]
  },
  {
    type: "listening",
    audio: "audio/024.mp3",
    sentence: "Understanding how to ___ the ___ will ___ your ___",
    blanks: ["use", "library", "save", "time"]
  },
  {
    type: "listening",
    audio: "audio/025.mp3",
    sentence: "University ___ are expected to ___ next ___",
    blanks: ["fees", "increase", "year"]
  },
  {
    type: "listening",
    audio: "audio/026.mp3",
    sentence: "Find out how to ___ ___ before your ___",
    blanks: ["get", "resources", "research"]
  },
  {
    type: "listening",
    audio: "audio/027.mp3",
    sentence: "Every ___ has both the ___ and the ___ to ___",
    blanks: ["student", "right", "ability", "succeed"]
  },
  {
    type: "listening",
    audio: "audio/028.mp3",
    sentence: "A good research ___ is not ___ to ___ questions",
    blanks: ["assistant", "afraid", "ask"]
  },
  {
    type: "listening",
    audio: "audio/029.mp3",
    sentence: "Making ___ is ___ as long as you ___ from ___",
    blanks: ["mistakes", "fine", "learn", "them"]
  },
  {
    type: "listening",
    audio: "audio/030.mp3",
    sentence: "We have a ___ in the ___ on ___",
    blanks: ["lecture", "morning", "Thursday"]
  }
];





    let currentIndex = parseInt(localStorage.getItem("taskIndex")) || 0;
    let nickname = localStorage.getItem("userNickname") || "æœªå‘½åç”¨æˆ·";
    const todayKey = new Date().toDateString();
let isLocked = localStorage.getItem("taskCompleted_" + todayKey) === "true";


function recordWrong(item) {
  const today = new Date().toISOString().split("T")[0]; // e.g. "2025-05-16"
  const lockKey = "taskCompleted_" + today;
  const isLocked = localStorage.getItem(lockKey) === "true";

  if (isLocked) {
    console.log("ä»Šæ—¥ä»»åŠ¡å·²å®Œæˆï¼Œä¸è®°å½•é”™é¢˜");
    return;
  }

  const data = JSON.parse(localStorage.getItem("wrongRecords") || "{}");

  if (!data[today]) data[today] = [];

  data[today].push(item);

  localStorage.setItem("wrongRecords", JSON.stringify(data));
}

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

  function submitAnswer(selected) {
  const correct = tasks[currentIndex].answer;
  let points = parseInt(localStorage.getItem("points")) || 0;

  if (!isLocked) {
    if (selected === correct) {
      points += 1;
      localStorage.setItem("points", points);
      document.getElementById("feedbackText").innerText = "âœ… æ­£ç¡®ï¼ +1ç§¯åˆ†";
      localStorage.setItem("taskResult_" + currentIndex, "correct"); 
      updateProgressRecord();

       // âœ… æ­£ç¡®è®°å½•
       
    } else {
      document.getElementById("feedbackText").innerText = "âŒ é”™è¯¯";
      localStorage.setItem("taskResult_" + currentIndex, "wrong");    // âœ… åªé”™æ—¶è®°å½• wrong
      updateProgressRecord();

      recordWrong({
  type: "word",
  question: tasks[currentIndex].word,
  correct: correct,
  userAnswer: selected
});

    }

    if (currentIndex + 1 >= tasks.length) {
    localStorage.setItem("taskCompleted_" + todayKey, "true");
isLocked = true;

    }

  } else {
    if (selected === correct) {
      document.getElementById("feedbackText").innerText = "âœ… æ­£ç¡®ï¼ˆç§¯åˆ†å·²é”å®šï¼‰";
      localStorage.setItem("taskResult_" + currentIndex, "correct");
    } else {
      document.getElementById("feedbackText").innerText = "âŒ é”™è¯¯ï¼ˆç§¯åˆ†å·²é”å®šï¼‰";
      localStorage.setItem("taskResult_" + currentIndex, "wrong");
    }
  }

  currentIndex++;
  localStorage.setItem("taskIndex", currentIndex);

  setTimeout(() => {
    loadTask();
    updateTopBar();
    setTimeout(() => {
  loadTask();
  updateTopBar();
  renderQuestionNav(); // âœ… æ·»åŠ è¿™ä¸€è¡Œ
}, 800);

  }, 800);
}

    renderQuestionNav();

    function loadTask() {
  if (currentIndex >= tasks.length) {
    document.querySelector(".task-box").innerHTML = `
      <div class="header-strip">âœ… æ­å–œå®Œæˆç¬¬äºŒé˜¶æ®µ</div>
      <div class="task-title">
        ğŸ“¸ è¯·è”ç³»è€å¸ˆå®Œæˆç…§ç‰‡æ‰“å¡ä»»åŠ¡ï¼Œ<br>
        æˆåŠŸåå°†è·å¾—<span style="color:#f39c12;"> +10ç§¯åˆ†</span>ï¼Œå¹¶è§£é”ğŸ ç¬¬ä¸‰æ¬¡æŠ½å¡æœºä¼šï¼
        <br><br>
        <button class="option-btn" onclick="restartTask()">ğŸ” å†ç­”ä¸€æ¬¡</button>
      </div>
    `;
    return;
  }

  const task = tasks[currentIndex];
  document.getElementById("feedbackText").innerText = "";

  if (task.type === "word") {
    document.getElementById("taskText").innerText = `ã€ç¬¬ ${currentIndex + 1} é¢˜ã€‘"${task.word}" çš„ä¸­æ–‡æ„æ€æ˜¯ï¼Ÿ`;
    const optionsHTML = shuffle([...task.options]).map(opt =>
      `<button class="option-btn" onclick="submitAnswer('${opt}')">${opt}</button>`
    ).join("");
    document.getElementById("optionsContainer").innerHTML = optionsHTML;

  } else if (task.type === "listening") {
    document.getElementById("taskText").innerHTML = `
      ã€ç¬¬ ${currentIndex + 1} é¢˜ã€‘è¯·å¬éŸ³é¢‘å¹¶å¡«å†™å¥å­ä¸­çš„ç©ºï¼š
      <br><br><audio controls src="${task.audio}"></audio><br><br>
    `;

    let parts = task.sentence.split("___");
    let html = "";
    for (let i = 0; i < parts.length; i++) {
      html += parts[i];
      if (i < task.blanks.length) {
        html += `<input type="text" class="input-blank" style="width: 80px; padding: 6px; font-size: 16px; margin: 0 4px;">`;
      }
    }
    html += `<br><br><button class="option-btn" onclick="submitListening()">æäº¤</button>`;

    document.getElementById("optionsContainer").innerHTML = html;
  }
}
renderQuestionNav();


    function updateTopBar() {
      const points = parseInt(localStorage.getItem("points")) || 0;
      document.getElementById("topbar").innerText = `ä½ å¥½ï¼Œ${nickname} ï½œ å½“å‰ç§¯åˆ†ï¼š${points}`;
    }

    function restartTask() {
      localStorage.removeItem("taskIndex");
      location.reload();
    }

    document.addEventListener("DOMContentLoaded", function () {
      updateTopBar();
      loadTask();
    });
    let hasSubmitted = false; // å…¨å±€çŠ¶æ€ï¼šæ˜¯å¦å·²æäº¤ç­”æ¡ˆ

function submitListening() {
  const inputs = document.querySelectorAll(".input-blank");
  const task = tasks[currentIndex];
  const feedback = document.getElementById("feedbackText");
  const button = document.querySelector(".option-btn");

  if (!hasSubmitted) {
    // ç¬¬ä¸€æ¬¡ç‚¹å‡»ï¼šæ‰§è¡Œåˆ¤é¢˜é€»è¾‘
    let correct = true;
    let points = parseInt(localStorage.getItem("points")) || 0;

    inputs.forEach((input, index) => {
      const userAnswer = input.value.trim().toLowerCase();
      const expected = task.blanks[index].toLowerCase();

      // æ¸…é™¤æ—§æ ‡è®°
      const oldMark = input.nextElementSibling;
      if (oldMark && oldMark.classList.contains("result-icon")) oldMark.remove();

      // æ·»åŠ æ–°æ ‡è®°
      const mark = document.createElement("span");
      mark.classList.add("result-icon");
      mark.style.marginLeft = "6px";
      mark.style.fontWeight = "bold";

      if (userAnswer === expected) {
        mark.innerText = "âœ”";
        mark.style.color = "green";
      } else {
        mark.innerText = "âœ˜";
        mark.style.color = "red";
        correct = false;
      }

      input.after(mark);
      input.disabled = true;
    });

    // ç§¯åˆ†é€»è¾‘
    if (!isLocked) {
      if (correct) {
        points += 1;
        localStorage.setItem("points", points);
        feedback.innerText = "âœ… å…¨éƒ¨æ­£ç¡®ï¼+1ç§¯åˆ†";
        updateProgressRecord();


      } else {
        feedback.innerText = "âŒ æœ‰é”™è¯¯ï¼ŒæœªåŠ åˆ†";
        localStorage.setItem("taskResult_" + currentIndex, "wrong");
        updateProgressRecord();

        recordWrong({
  type: "listening",
  sentence: task.sentence,
  correctBlanks: task.blanks,
  userAnswers: Array.from(inputs).map(i => i.value.trim())
});


      }

  if (currentIndex + 1 >= tasks.length) {
  const todayKey = new Date().toDateString();
  localStorage.setItem("taskCompleted_" + todayKey, "true");
  isLocked = true;
}

    } else {
      feedback.innerText = correct ? "âœ… æ­£ç¡®ï¼ˆç§¯åˆ†å·²é”å®šï¼‰" : "âŒ é”™è¯¯ï¼ˆç§¯åˆ†å·²é”å®šï¼‰";
    }

    // ä¿®æ”¹æŒ‰é’®ä¸ºâ€œä¸‹ä¸€é¢˜â€
    button.innerText = "â¡ï¸ ä¸‹ä¸€é¢˜";
    hasSubmitted = true;

  } else {
    // ç¬¬äºŒæ¬¡ç‚¹å‡»ï¼šè¿›å…¥ä¸‹ä¸€é¢˜
    hasSubmitted = false;
    currentIndex++;
    localStorage.setItem("taskIndex", currentIndex);
    loadTask();
    updateTopBar();
renderQuestionNav(); // âœ… æ·»åŠ è¿™ä¸€è¡Œ

  }
}
renderQuestionNav();

function renderQuestionNav() {
  const nav = document.getElementById("questionNav");
  let html = "<div style='font-weight: bold; margin-bottom: 12px;'>é¢˜ç›®è·³è½¬</div><div style='display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px;'>";

for (let i = 0; i < tasks.length; i++) {
  const isCurrent = i === currentIndex;
  const result = localStorage.getItem("taskResult_" + i);

  let borderColor, bgColor, textColor;

  if (isCurrent) {
    // å½“å‰é¢˜ç›®ä¼˜å…ˆçº§æœ€é«˜
    borderColor = '#007bff';
    bgColor = '#e6f0ff';
    textColor = '#007bff';
  } else if (result === "correct") {
    // æ­£ç¡®ï¼šç»¿è‰²
    borderColor = '#28a745';
    bgColor = '#e6f9ec';
    textColor = '#28a745';
  } else if (result === "wrong") {
    // é”™è¯¯ï¼šçº¢è‰²
    borderColor = '#dc3545';
    bgColor = '#fdecea';
    textColor = '#dc3545';
  } else {
    // æœªåšé¢˜
    borderColor = '#ccc';
    bgColor = '#f2f2f2';
    textColor = '#333';
  }

  html += `<button 
    onclick="jumpTo(${i})"
    style="
      width: 34px;
      height: 34px;
      font-size: 14px;
      font-weight: bold;
      border-radius: 6px;
      border: 2px solid ${borderColor};
      background-color: ${bgColor};
      color: ${textColor};
      cursor: pointer;
    "
  >${i + 1}</button>`;
}

  html += "</div>";
  nav.innerHTML = html;
}





function jumpTo(index) {
  currentIndex = index;
  localStorage.setItem("taskIndex", currentIndex);
  hasSubmitted = false;
  loadTask();
 renderQuestionNav();

  updateTopBar();
}
function updateProgressRecord() {
  let count = 0;
  for (let i = 0; i < tasks.length; i++) {
    const result = localStorage.getItem("taskResult_" + i);
    if (result) count++;
  }
  localStorage.setItem("taskProgress", count);
}


  </script>

</body>
</html>   
